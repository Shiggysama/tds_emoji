(function() {
 var paths = <%= Dir.glob(File.expand_path("../../../public/images/*.*", __FILE__)).map{|f| File.basename(f)}.inspect %>;
 var TDSEmoji = [];
 var i;
 for(i = 0 ; i < paths.length ; i++){
	var path = paths[i];
	var code = path.split(".")[0];
	TDSEmoji[code] = path;
 }
 console.log(paths.length + " paths detected");
 console.log(paths);
 console.log(TDSEmoji);
 console.log("Registering custom emojis");
 for(var key in TDSEmoji){
	if(paths.hasOwnProperty(key)){
		console.log("Code: " + key + " - Path: /plugins/tds_emoji/images/" + TDSEmoji[key]);
		Discourse.Dialect.registerEmoji(key, '/plugins/tds_emoji/images/'+TDSEmoji[key]);
	}
 }
 console.log("Done registering custom emojis");
})();
